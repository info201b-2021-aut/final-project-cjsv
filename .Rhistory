colorscale = "Viridis",
colorbar = list(title = "Total Victims")
),
hoverinfo = "text"
) %>%
layout(
title = "Shootings Around United States In 2018",
geo = background_aes
)
# Plot of My Choice
shooting_places <- shootings_2018 %>%
mutate(order_month = floor_date(as.Date(date, "%B%d,%Y"), unit = "month")) %>%
group_by(state, order_month) %>%
count(order_month) %>%
filter(state == "Washington" |
state == "Nevada" |
state == "California")
state_1 <- unique(shooting_places$state)[1]
state_2 <- unique(shooting_places$state)[2]
state_3 <- unique(shooting_places$state)[3]
shooting_plot <- ggplot(shooting_places) +
geom_bar(
stat = "identity",
mapping = aes(x = order_month, y = n, fill = state),
position = "stack"
) +
labs(
title = "2018 Shootings in California, Nevada, and Washington",
x = "Months", y = "Number of Incidents", color = "blue"
)
?floor_date
#Interactive Map
mapdata("usa")
#Interactive Map
map_data("usa")
map_data("usa")
geom_polygon(
mapping = aes(x = long, y = lat, group = group),
color = "white",
size = .1
) +
coord_map()
background_aes <- list(
scope = "usa",
projection = list(type = "usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
library("dplyr")
library("ggplot2")
library("lubridate")
library("tidyr")
library("ggmap")
library("plotly")
background_aes <- list(
scope = "usa",
projection = list(type = "usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
View(background_aes)
background_aes <- list(
scope = "usa",
projection = list(type = "usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
plot <- plot_geo(shootings_2018, lat = ~lat, lon = ~long) %>%
add_markers(
text = ~ paste0(
"\n", "Date: ", as.Date(date, format = "%B %d, %Y"),
"\n", "Location: ", address, ", ", city, ", ", state,
"\n", paste0("Death: ", num_killed),
"\n", paste0("Injured: ", num_injured)
),
mode = "markers",
marker = list(
opacity = ~ (num_killed + num_injured) / 10,
color = ~ (num_killed + num_injured),
size = ~ sqrt((num_killed + num_injured) * 5),
colorscale = "Viridis",
colorbar = list(title = "Total Victims")
),
hoverinfo = "text"
) %>%
layout(
title = "Shootings Around United States In 2018",
geo = background_aes
)
install.packages("plotly") # once per machine
library("plotly")
install.packages(usmap)
install.packages("usmap")
library("usmap")
plot_usmap(regions = "counties") +
labs(title = "Shootings in the U.S.")
theme(panel.background = element_rect(color = "black", fill = "lightblue"))
#Interactive Map
state_shape <- map_data("state")
library("dplyr")
library("ggplot2")
library("tidyr")
library("plotly")
library("usmap")
#Interactive Map
state_shape <- map_data("state")
install.packages("maps")
#Interactive Map
state_shape <- map_data("state")
View(state_shape)
state_shape <- map_data("state")
ggplot(state_shape) +
geom_polygon(
mapping = aes(x = long, y = lat, group = group),
color = "white", # show state outlines
size = .1        # thinly stroked
) +
coord_map()
state_shape <- map_data("state")
ggplot(state_shape) +
geom_polygon(
mapping = aes(x = long, y = lat, group = group),
color = "white",
size = .1
) +
coord_map()
View(shootings_2018)
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = tolower(num_killed + num_injured))
state_shape <- map_data("state") %>% # load state shapefile
rename(state = region) %>% # rename for joining
left_join(total_deaths_and_injuries, by="state") # join eviction data
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = tolower(num_killed + num_injured))
View(state_shootings)
state_shootings
state_shootings <- shootings_2018 %>%
group_by(state)
state_shootings
state_shootings <- shootings_2018 %>%
group_by(state) %>%
summarize(total_deaths_and_injuries = tolower(num_killed + num_injured))
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = tolower(num_killed + num_injured))
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = tolower(num_killed + num_injured))
state_shape <- map_data("state") %>% # load state shapefile
rename(state = region) %>% # rename for joining
left_join(total_deaths_and_injuries, by="state") # join shooting data
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = tolower(num_killed + num_injured))
state_shape <- map_data("state") %>% # load state shapefile
rename(region = state) %>% # rename for joining
left_join(total_deaths_and_injuries, by="state")
state_shape <- map_data("state") %>% # load state shapefile
rename(state = region) %>% # rename for joining
left_join(total_deaths_and_injuries, by="state")
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = tolower(num_killed + num_injured))
state_shape <- map_data("state") %>% # load state shapefile
rename(state = region) %>% # rename for joining
left_join(total_deaths_and_injuries, by="state")
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = num_killed + num_injured)
state_shape <- map_data("state") %>% # load state shapefile
rename(state = region) %>% # rename for joining
left_join(total_deaths_and_injuries, by="state")
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = num_killed + num_injured)
state_shape <- map_data("state") %>%
rename(state = region) %>%
left_join(total_deaths_and_injuries, by="state")
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = num_killed + num_injured)
state_shape <- map_data("state") %>%
rename(state = region) %>%
left_join(total_deaths_and_injuries, by="state")
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = num_killed + num_injured)
state_shape <- map_data("state") %>%
rename(state = region) %>%
left_join(total_deaths_and_injuries, by="state")
state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = num_killed + num_injured)
state_shape <- map_data("state") %>%
rename(state = region) %>%
left_join(total_deaths_and_injuries, by="state")
ggplot(data = state_shape) +
geom_polygon(
mapping = aes(x = long, y = lat, group = group),
color = "white",
size = .1
) +
coord_map() +
scale_fill_continuous(low = "#132B43", high = "Red") +
labs(fill = "total_deaths_and_injuries") +
blank_theme
group_by(state) %>%
mutate(total_deaths_and_injuries = num_killed + num_injured)
state_shape <- map_data("state") %>%
rename(state = region) %>%
left_join(total_deaths_and_injuries, by="state")
#Interactive Map to demonstrate number of shootings per state
state_shape <- map_data("state")
state_shape <- map_data("state")
ggplot(state_shape) +
geom_polygon(
mapping = aes(x = long, y = lat, group = group),
color = "white",
size = .1
) +
coord_map()
state_shape <- map_data("state")
ggplot(state_shape) +
geom_polygon(
mapping = aes(x = long, y = lat, group = group),
color = "white",
size = .1
) +
coord_map()
impact_state_shootings <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = num_killed + num_injured)
impact_state_shootings
plot <- ggplot(impact_state_shootings, aes(x = long, y = lat))
plot
plot <- ggplot(impact_state_shootings, aes(x = long, y = lat))
geom_polygon(
mapping = aes(x = long, y = lat, group = group),
color = "white",
size = .1
)
plot
state_shape <- map_data("state")
new_df <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = num_killed + num_injured)
select(city, lat, long, total_number_deaths_injuries)
ggplot(state_shape) +
geom_polygon(mapping = aes(x = long, y = lat, group = group)) +
geom_point(
data = city,
mapping = aes(x = long, y = lat),
color = "red"
) +
coord_map()
state_shape <- map_data("state")
new_df <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = num_killed + num_injured) %>%
select(city, lat, long, total_number_deaths_injuries)
ggplot(state_shape) +
geom_polygon(mapping = aes(x = long, y = lat, group = group)) +
geom_point(
data = city,
mapping = aes(x = long, y = lat),
color = "red"
) +
coord_map()
new_df <- shootings_2018 %>%
group_by(state) %>%
mutate(total_deaths_and_injuries = num_killed + num_injured) %>%
select(city, lat, long, total_number_deaths_injuries) %>%
as.dataframe()
state_shape <- map_data("state")
ggplot(state_shape) +
geom_polygon(mapping = aes(x = long, y = lat, group = group)) +
geom_point(
data = city,
mapping = aes(x = long, y = lat),
color = "red"
) +
coord_map()
install.packages("ggmap")
# How many cities had more than 3 shootings in 2018?
cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
n()
library("dplyr")
cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
n()
cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
n()
cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
n(city)
cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
n()
cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
n(unique(city))
cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
n()
# How many cities had more than 3 shootings in 2018?
number_cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
n()
# How many cities had more than 3 shootings in 2018?
number_cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
n()
number_cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
n()
number_cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3)
cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
arrange(-shootings_freq)
number_cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
count()
View(number_cities_more_than_3_shootings)
number_cities_more_than_3_shootings <- shootings_2018 %>%
group_by(city) %>%
summarize(shootings_freq = n()) %>%
filter(shootings_freq > 3) %>%
count() %>%
pull(n)
lint("index.Rmd")
library(lintr)
lint("index.Rmd")
style_file("index.Rmd")
library(styler)
style_file("index.Rmd")
lint("index.Rmd")
lint("analysis.R")
style_file("analysis.R")
style_file("analysis.R")
lint("analysis.R")
lint("analysis.R")
lint("analysis.R")
setwd("~/Desktop/a5-kte00-1820476")
lint("analysis.R")
lint("index.Rmd")
lint("index.Rmd")
lint("analysis.R")
source("~/Desktop/INFO201/final-project-cjsv/scripts/chart_3.R")
source("~/Desktop/INFO201/final-project-cjsv/scripts/summary_info.R")
setwd("~/Desktop/INFO201/final-project-cjsv")
setwd("~/Desktop/INFO201/final-project-cjsv")
setwd("~/Desktop/INFO201/final-project-cjsv")
setwd("~/Desktop/INFO201/final-project-cjsv")
source("~/Desktop/INFO201/final-project-cjsv/scripts/summary_info.R")
source("~/Desktop/INFO201/final-project-cjsv/scripts/aggregate_table.R")
source("~/Desktop/INFO201/final-project-cjsv/scripts/chart_3.R")
source("~/Desktop/INFO201/final-project-cjsv/scripts/chart_3.R")
# Load Incarceration Trends Data
incarceration_trends <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
# Load Incarceration Trends Data
incarceration_trends <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
# Load Incarceration Trends Data
incarceration_trends <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
# Load Incarceration Trends Data
incarceration_trends <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
# Load Incarceration Trends Data
incarceration_trends <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
# Load Incarceration Trends Data
incarceration_trends <- download.file("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
url <- "https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv"
destfile <- "C:/Users/cindyte/Desktop/INFO201/assignment-3---incarceration-cindyte/data/output.csv"
incarceration_trends <- download.file(url, destfile)
url <- "https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv"
destfile <- "C:/Users/cindyte/Desktop/INFO201/assignment-3---incarceration-cindyte/data"
incarceration_trends <- download.file(url, destfile)
# Load Incarceration Trends Data
url <- "http://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv"
incarceration_trends <- read.csv(file=url)
installed.packages("RCurl")
install.packages("RCurl")
incarceration_trends <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
# Load Incarceration Trends Data
curlSetOpt(timeout = 400)
# Load Incarceration Trends Data
library("Rcurl")
# Load Incarceration Trends Data
library("RCurl")
curlSetOpt(timeout = 400)
incarceration_trends <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
# Load Incarceration Trends Data
options(timeout = 400)
incarceration_trends <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
View(incarceration_trends)
library("tidyverse")
library("ggplot2")
library("patchwork")
incarceration_trends <- incarceration_trends %>%
mutate(location = paste(county_name, state, sep = ", "))
View(incarceration_trends)
most_incarcerations <- incarceration_trends %>%
group_by(location) %>%
summarize(total_incarcerations = sum(total_jail_pop)) %>%
filter(total_incarcerations == max(total_incarcerations, na.rm = TRUE)) %>%
pull(location)
most_incarcerations <- incarceration_trends %>%
filter(year == "2018") %>%
filter(total_jail_pop == max(total_jail_pop, na.rm = TRUE)) %>%
pull(location)
most_incarcerations <- incarceration_trends %>%
filter(year == "2018") %>%
filter(total_jail_pop == max(total_jail_pop, na.rm = TRUE)) %>%
pull(location)
most_incarcerations <- incarceration_trends %>%
filter(year == "2018") %>%
filter(total_jail_pop == max(total_jail_pop, na.rm = TRUE)) %>%
pull(location)
highest_num_incarcerations <- incarceration_trends %>%
filter(year == "2018") %>%
pull(max(total_jail_pop))
highest_num_incarcerations <- incarceration_trends %>%
filter(year == max(year)) %>%
filter(total_jail_pop == max(total_jail_pop))
pull(total_jail_pop)
highest_num_incarcerations <- incarceration_trends %>%
filter(year == "2018") %>%
filter(total_jail_pop == max(total_jail_pop)) %>%
pull(total_jail_pop)
highest_num_incarcerations <- incarceration_trends %>%
filter(year == "2018") %>%
filter(total_jail_pop == max(total_jail_pop, na.rm = TRUE)) %>%
pull(total_jail_pop)
incarceration_trends <- incarceration_trends %>%
mutate(location = paste(county_name, state, sep = ", "))
# What is highest number of incarcerations in the earliest date, 1970?
highest_incarcerations_1970 <- incarceration_trends %>%
filter(year == "1970") %>%
filter(total_jail_pop == max(total_jail_pop, na.rm = TRUE)) %>%
pull(total_jail_pop)
# What is the highest number of incarcerations in the most recent date, 2018?
highest_incarcerations_2018 <- incarceration_trends %>%
filter(year == "2018") %>%
filter(total_jail_pop == max(total_jail_pop, na.rm = TRUE)) %>%
pull(total_jail_pop)
# Which location had the most incarcerations in earliest date, 1970?
most_incarcerations_1970 <- incarceration_trends %>%
filter(year == "1970") %>%
filter(total_jail_pop == max(total_jail_pop, na.rm = TRUE)) %>%
pull(location)
# Which location had the most incarcerations in the most recent date, 2018?
most_incarcerations_2018 <- incarceration_trends %>%
filter(year == "2018") %>%
filter(total_jail_pop == max(total_jail_pop, na.rm = TRUE)) %>%
pull(location)
highest_race_pop_1970 <- incarceration_trends %>%
filter(year == "1970") %>%
select(pmax(aapi_jail_pop, black_jail_pop, latinx_jail_pop, native_jail_pop, white_jail_pop, other_race_jail_pop))
highest_race_pop_1970 <- incarceration_trends %>%
filter(year == "1970") %>%
select(pmax(black_jail_pop, latinx_jail_pop, native_jail_pop, white_jail_pop, other_race_jail_pop))
highest_race_pop_1970 <- incarceration_trends %>%
filter(year == "1970") %>%
pull(pmax(aapi_jail_pop, black_jail_pop, latinx_jail_pop, native_jail_pop, white_jail_pop, other_race_jail_pop))
highest_race_pop_1970 <- incarceration_trends %>%
filter(year == "1970") %>%
filter(pmax(aapi_jail_pop, black_jail_pop, latinx_jail_pop, native_jail_pop, white_jail_pop, other_race_jail_pop))
pull()
highest_race_pop_1970 <- incarceration_trends %>%
filter(year == "1970") %>%
pull(pmax(aapi_jail_pop, black_jail_pop, latinx_jail_pop, native_jail_pop, white_jail_pop, other_race_jail_pop, na.rm = TRUE))
highest_race_pop_1970 <- incarceration_trends %>%
filter(year == "1970") %>%
pull(pmax(aapi_jail_pop, black_jail_pop, latinx_jail_pop, native_jail_pop, white_jail_pop, other_race_jail_pop, na.rm = TRUE))
highest_race_pop_1970 <- incarceration_trends %>%
filter(year == "1970") %>%
pull(aapi_jail_pop, black_jail_pop, latinx_jail_pop, native_jail_pop, white_jail_pop, other_race_jail_pop)
